<?xml version="1.0" encoding="utf-8"?>
<!--
/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
**
** Copyright	2012 Dominik Pretzsch
**				    2017 Gruppen it Security
**
** Author		  Dominik Pretzsch
**				    Nils Behlen
**
**    Licensed under the Apache License, Version 2.0 (the "License");
**    you may not use this file except in compliance with the License.
**    You may obtain a copy of the License at
**
**        http://www.apache.org/licenses/LICENSE-2.0
**
**    Unless required by applicable law or agreed to in writing, software
**    distributed under the License is distributed on an "AS IS" BASIS,
**    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
**    See the License for the specific language governing permissions and
**    limitations under the License.
**
** * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-->
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <UI>
            <!-- SINGLE PAGE: ServerDlg — only API Key -->
            <TextStyle Id="Tahoma_Bold" FaceName="Tahoma" Size="8" Bold="yes" />
            <Dialog Id="ServerDlg" Width="370" Height="270" Title="[ProductName]" NoMinimize="yes">
                <!-- Top Banner with logo on the left -->
                <Control Id="BannerBitmap" Type="Bitmap" X="0" Y="0" Width="370" Height="44" TabSkip="no" Text="WixUI_Bmp_Banner" />
                <Control Id="Title" Type="Text" X="95" Y="6" Width="260" Height="15" Transparent="yes" NoPrefix="yes">
                    <Text>{\WixUI_Font_Title}Configuração do Servidor</Text>
                </Control>
                <Control Id="Description" Type="Text" X="95" Y="22" Width="260" Height="15" Transparent="yes" NoPrefix="yes">
                    <Text>Conexão com o servidor MFA.</Text>
                </Control>
                <Control Id="BannerLine" Type="Line" X="0" Y="44" Width="370" Height="0" />

                <!-- Server info (read-only) -->
                <Control Type="Text" Id="ServerInfoLabel" Width="320" Height="15" X="20" Y="56" Text="{\Tahoma_Bold}Servidor MFA:" />
                <Control Type="Text" Id="ServerUrlDisplay" Width="320" Height="15" X="20" Y="74" Text="https://mfa.gruppen.com.br" />

                <!-- API Key -->
                <Control Type="Text" Id="ApiKeyLabel" Width="320" Height="15" X="20" Y="106" Text="{\Tahoma_Bold}Chave de API:" />
                <Control Type="Edit" Id="ApiKeyEdit" Width="320" Height="15" X="20" Y="124" Property="API_KEY" />
                <Control Type="Text" Id="ApiKeyHint" Width="320" Height="25" X="20" Y="143" Text="A chave de API gerenciada (começa com mfa_). Obtenha no painel administrativo do MFA." />

                <!-- Optional: Enable Filter + Debug -->
                <Control Type="CheckBox" Id="EnableFilter" Property="ENABLE_FILTER" CheckBoxValue="1" Width="300" Height="17" X="20" Y="183" Text="Ativar filtro do Credential Provider (bloquear outros provedores)" />
                <Control Type="CheckBox" Id="DebugLog" Property="DEBUG_LOG" CheckBoxValue="1" Width="300" Height="17" X="20" Y="200" Text="Ativar log de depuração" />

                <!-- Bottom Controls -->
                <Control Id="BottomLine" Type="Line" X="0" Y="234" Width="370" Height="0" />
                <Control Id="Back" Type="PushButton" X="180" Y="243" Width="56" Height="17" Text="&amp;Voltar">
                    <Publish Event="NewDialog" Value="LicenseAgreementDlg">1</Publish>
                </Control>
                <Control Id="Next" Type="PushButton" X="236" Y="243" Width="56" Height="17" Default="yes" Text="&amp;Avançar">
                    <Publish Event="NewDialog" Value="VerifyReadyDlg">API_KEY</Publish>
                    <Publish Event="SpawnDialog" Value="MissingApiKeyDlg"><![CDATA[NOT API_KEY]]></Publish>
                </Control>
                <Control Id="Cancel" Type="PushButton" X="304" Y="243" Width="56" Height="17" Cancel="yes" Text="Cancelar">
                    <Publish Event="SpawnDialog" Value="CancelDlg">1</Publish>
                </Control>
            </Dialog>
        </UI>
    </Fragment>
    <Fragment>
        <UI>
            <Dialog Id="MissingApiKeyDlg" Width="260" Height="85" Title="[ProductName]" NoMinimize="yes">
                <Control Id="Icon" Type="Icon" X="15" Y="15" Width="24" Height="24" ToolTip="Atenção" FixedSize="yes" IconSize="32" Text="ExclamIcon" />
                <Control Id="Return" Type="PushButton" X="100" Y="57" Width="56" Height="17" Default="yes" Cancel="yes" Text="&amp;Voltar">
                    <Publish Event="EndDialog" Value="Return">1</Publish>
                </Control>
                <Control Id="Text" Type="Text" X="48" Y="15" Width="194" Height="30" TabSkip="no">
                    <Text>Por favor, informe a Chave de API.</Text>
                </Control>
            </Dialog>
        </UI>
    </Fragment>
</Wix>
